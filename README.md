# web3-toolkit

一个基于 ethers.js + Hardhat 构建的 Web3 工程工具库（个人长期版本化维护）。

本仓库的目标不是“示例代码”，  
而是作为 **可复用、可验证、可演进的 Web3 工程基础设施**。

---

## 📌 当前版本

- **v0.11.0（v11）**

这是一个**完整、稳定、已被真实 DApp 使用验证的版本**。

---

## ✨ v11 已实现能力

### 合约与链交互
- Bank 合约集成（存款 / 取款）
- 本地 Hardhat 网络支持
- Provider / Signer / Contract 统一封装

### 交易与金额校验（核心）
- 正确区分：
  - `tx.value`（链上实际转账 ETH）
  - `event.amount`（合约逻辑金额）
- Deposit / Withdraw 金额 **事件级校验**
- 防止：
  - 金额显示错误
  - 重放交易导致 UI 错乱
  - 依赖 tx.value 造成的 Withdraw 误判

### 工具函数
- `getBankContract`
- `getBalance`
- `verifyBankTxAmount`（生产级交易金额校验）

### React Hooks
- `useWallet`
- `useBankApp`
  - 并发安全
  - 防刷屏
  - 强制刷新控制
  - 交易完成后状态一致性保证

---

## 🧠 工程设计要点

- **事件驱动而不是状态猜测**
- **校验优先于刷新**
- **明确导出，避免 build / DTS 丢符号**
- **版本即快照，每个版本都可单独使用**

---

## 🧪 使用状态

- v11 已在 `my-bank-dapp` 中完整使用
- 本地 Hardhat 多终端流程验证通过
- Deposit / Withdraw 金额与事件完全一致

---

## 🧩 版本理念说明

本仓库采用 **版本演进式学习 + 工程化沉淀**：

- v9 / v10 / v11 都是可回溯快照
- 不追求“一步到位”，而是逐步工程化
- 每一版都能单独作为学习或复用基础

---

## 📍 备注

这是一个长期维护的个人 Web3 工程工具库，  
后续版本将扩展 ERC20、授权校验、多合约协作等能力。